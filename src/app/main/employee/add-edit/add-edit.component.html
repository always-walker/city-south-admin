<div [style.max-height]="divHeight" style="overflow-y: auto;">
  <table class="edit-table">
    <tbody>
      <tr>
        <td class="edit-td-title">项目名称</td>
        <td class="edit-td-content">
          <nz-select style="width:100%;" nzAllowClear nzPlaceHolder="选择项目" [(ngModel)]="data['EstateId']">
            <nz-option *ngFor="let estateItem of estateList" [nzLabel]="estateItem['EstateName']"
              [nzValue]="estateItem['EstateId']"></nz-option>
          </nz-select>
        </td>
        <td class="edit-td-title">员工岗位</td>
        <td class="edit-td-content">
          <nz-cascader style="width: 100%;" [nzAllowClear]="false" [nzOptions]="postList" [(ngModel)]="postItem"
            (ngModelChange)="onPostChanges()"></nz-cascader>
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">员工编号</td>
        <td class="edit-td-content">
          <input nz-input placeholder="员工编号" [(ngModel)]="data['EmployeeNo']" />
        </td>
        <td class="edit-td-title">员工姓名</td>
        <td class="edit-td-content">
          <input nz-input placeholder="员工姓名" [(ngModel)]="data['EmployeeName']" />
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">身份证号</td>
        <td class="edit-td-content">
          <input nz-tooltip nzTooltipTrigger="null" nzTooltipPlacement="topLeft" [nzVisible]="errors['cardid']"
            nzTooltipTitle="身份证号码输入错误" [class.error]="errors['cardid']" nz-input placeholder="身份证号"
            [(ngModel)]="data['CardId']" (ngModelChange)="checkValue($event, 'cardid', true)" />
        </td>
        <td class="edit-td-title">员工性别</td>
        <td class="edit-td-content">
          <nz-select style="width:100%;" nzPlaceHolder="员工性别" [(ngModel)]="data['Sex']">
            <nz-option nzLabel="男" nzValue="男"></nz-option>
            <nz-option nzLabel="女" nzValue="女"></nz-option>
          </nz-select>
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">员工学历</td>
        <td class="edit-td-content">
          <nz-select style="width:100%;" nzPlaceHolder="员工学历" [(ngModel)]="data['Education']">
            <nz-option nzLabel="博士" nzValue="博士"></nz-option>
            <nz-option nzLabel="硕士研究生" nzValue="硕士研究生"></nz-option>
            <nz-option nzLabel="大学本科" nzValue="大学本科"></nz-option>
            <nz-option nzLabel="大学专科" nzValue="大学专科"></nz-option>
            <nz-option nzLabel="高中" nzValue="高中"></nz-option>
            <nz-option nzLabel="初中" nzValue="初中"></nz-option>
            <nz-option nzLabel="小学" nzValue="小学"></nz-option>
            <nz-option nzLabel="其它" nzValue="其它"></nz-option>
          </nz-select>
        </td>
        <td class="edit-td-title">手机号码</td>
        <td class="edit-td-content">
          <input nz-tooltip nzTooltipTrigger="null" nzTooltipPlacement="topLeft" [nzVisible]="errors['phone']"
            nzTooltipTitle="手机号码填写错误" [class.error]="errors['phone']" nz-input placeholder="手机号码"
            [(ngModel)]="data['Phone']" (ngModelChange)="checkValue($event, 'phone')" />
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">紧急联系人</td>
        <td class="edit-td-content">
          <input nz-input placeholder="紧急联系人" [(ngModel)]="data['UrgentContactName']" />
        </td>
        <td class="edit-td-title">紧急联系电话</td>
        <td class="edit-td-content">
          <input nz-tooltip nzTooltipTrigger="null" nzTooltipPlacement="topLeft" [nzVisible]="errors['phone2']"
            nzTooltipTitle="手机号码填写错误" [class.error]="errors['phone2']" nz-input placeholder="紧急联系电话"
            [(ngModel)]="data['UrgentContactPhone']" (ngModelChange)="checkValue($event, 'phone2', true)" />
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">家庭住址</td>
        <td class="edit-td-content">
          <nz-cascader style="width: 100%;" [nzOptions]="cityList" [(ngModel)]="cityItem"
            (ngModelChange)="onAddressChanges()"></nz-cascader>
        </td>
        <td class="edit-td-title">街道信息</td>
        <td class="edit-td-content">
          <input nz-input placeholder="街道信息" [(ngModel)]="street" (ngModelChange)="onAddressChanges()" />
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">入职日期</td>
        <td class="edit-td-content">
          <nz-date-picker [(ngModel)]="data['EntryDate']"></nz-date-picker>
        </td>
        <td class="edit-td-title">离职日期</td>
        <td class="edit-td-content">
          <nz-date-picker [(ngModel)]="data['QuitDate']"></nz-date-picker>
        </td>
      </tr>
      <tr [style.display]="(curPostId && data['PostId'] != curPostId) ? '' : 'none'">
        <td class="edit-td-title">调岗时间</td>
        <td class="edit-td-content" colspan="3">
          <nz-date-picker [(ngModel)]="data['ChangePostDate']"></nz-date-picker>
        </td>
      </tr>
      <tr [style.display]="(curPostId && data['PostId'] != curPostId) ? '' : 'none'">
        <td class="edit-td-title">调岗原因</td>
        <td class="edit-td-content" colspan="3">
          <textarea rows="3" nz-input [(ngModel)]="data['ChangePostRemark']"></textarea>
        </td>
      </tr>
      <tr [style.display]="data['QuitDate'] ? '': 'none'">
        <td class="edit-td-title">离职原因</td>
        <td class="edit-td-content" colspan="3">
          <textarea rows="3" nz-input [(ngModel)]="data['QuitRemark']"></textarea>
        </td>
      </tr>
      <tr>
        <td class="edit-td-title">备注</td>
        <td class="edit-td-content" colspan="3">
          <textarea rows="3" nz-input [(ngModel)]="data['Remark']"></textarea>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="edit-footer">
    <button nz-button (click)="cancel();" nzType="default">取 消</button>
    <button nz-button [nzLoading]="isLoading" (click)="handleOk();" nzType="primary">提 交</button>
  </div>
  <div [style.display]="(postHistory && postHistory.length > 0) ? '' : 'none'">
    <div class="edit-title">岗位变更历史</div>
    <nz-table #historyTable [nzShowPagination]="false" [nzPageSize]="1000" [nzData]="postHistory">
      <thead>
        <tr>
          <th nzWidth="160px">调整前岗位</th>
          <th nzWidth="160px">调整后岗位</th>
          <th nzWidth="130px">调整时间</th>
          <th nzWidth="100px">操作人</th>
          <th>备注</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of historyTable.data">
          <td>{{postNames[item['CurrentPostId']]}}</td>
          <td>{{postNames[item['ChangePostId']]}}</td>
          <td>{{item['ChangeDate'] | date:'yyyy-MM-dd HH:mm'}}</td>
          <td>{{item['Transactor']}}</td>
          <td>{{item['Remark']}}</td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</div>
